import{j as k,k as r,F as y,l as C,c,a as e,w as B,d as S,v as T,m,p as f,f as _,o as n,t as s,g as O,b as N,u as E,y as j}from"./app-BrDR_cqU.js";import{i as D}from"./index-D_iKGCFe.js";import{S as d}from"./sweetalert2-z6gKu1nJ.js";import M from"./Pagination-BTFFSG2O.js";import{d as U}from"./debounce-BenyaRjd.js";const V={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5"},$={class:"mx-auto max-w-screen-xl px-4 lg:px-12"},A={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},F={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},I={class:"w-full md:w-1/2"},P=e("label",{for:"simple-search",class:"sr-only"},"Search",-1),z={class:"relative w-full"},L=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),q={class:"overflow-x-auto"},Y={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},G=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3"},"Order ID"),e("th",{scope:"col",class:"px-4 py-3"},"Order Status"),e("th",{scope:"col",class:"px-4 py-3"},"User Name"),e("th",{scope:"col",class:"px-4 py-3"},"User Email"),e("th",{scope:"col",class:"px-4 py-3"},"User Number"),e("th",{scope:"col",class:"px-4 py-3"},"Address"),e("th",{scope:"col",class:"px-4 py-3"},"Products"),e("th",{scope:"col",class:"px-4 py-3"},"Total Price"),e("th",{scope:"col",class:"px-4 py-3"},"Payment Type"),e("th",{scope:"col",class:"px-4 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1),H={class:"px-4 py-3"},J={class:"px-4 py-3"},K={class:"px-4 py-3"},Q={class:"px-4 py-3"},R={class:"px-4 py-3"},W={class:"px-4 py-3"},X={class:"px-4 py-3"},Z={class:"px-4 py-3"},ee={class:"px-4 py-3"},te={class:"px-4 py-3 flex items-center justify-end space-x-2"},se=["onClick"],oe=["onClick"],re={key:1},ae=e("td",{colspan:"10",class:"text-center py-4"},"No Orders available",-1),le=[ae],ue={__name:"OrdersList",props:{orders:Object,filters:Object},setup(i){const g=i;k(()=>{D()}),r(!1),r(!1),r(!1),r(""),r(""),r(""),r("");const p=r(g.filters.search||""),b=U(o=>{y.get(route("admin.orders.index"),{search:o},{preserveState:!0,preserveScroll:!0})},500);C(p,o=>{b(o)});const w=async o=>{try{(await d.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed&&await y.delete(route("admin.orders.delete",o),{onSuccess:t=>{d.fire({toast:!0,title:t.props.flash.success,position:"top-end",icon:"success",showConfirmButton:!1,timer:1500})},onError:t=>{d.fire({title:"Error!",text:"There was an error deleting the order: "+t.message,position:"top-end",icon:"error",showConfirmButton:!1,timer:1500})}})}catch(a){d.fire({toast:!0,title:"Error!",text:"There was an error deleting the order: "+a.message,position:"top-end",icon:"error",showConfirmButton:!1,timer:1500})}},v=o=>{window.open(`/admin/orders/${o}/print-invoice`,"_blank")};return(o,a)=>(n(),c("section",V,[e("div",$,[e("div",A,[e("div",F,[e("div",I,[e("form",{onSubmit:a[1]||(a[1]=B(()=>{},["prevent"]))},[P,e("div",z,[L,S(e("input",{type:"text",id:"simple-search","onUpdate:modelValue":a[0]||(a[0]=t=>p.value=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search by Order ID, User Name, or Email"},null,512),[[T,p.value]])])],32)])]),e("div",q,[e("table",Y,[G,e("tbody",null,[i.orders.data&&i.orders.data.length?(n(!0),c(m,{key:0},f(i.orders.data,t=>{var u,h,x;return n(),c("tr",{key:t.id,class:"border-b dark:border-gray-700"},[e("td",H,s(t.id),1),e("td",J,s(t.status),1),e("td",K,s(t.user.name),1),e("td",Q,s(t.user.email),1),e("td",R,s(t.user.number),1),e("td",W,s((u=t.user_address)==null?void 0:u.address1)+", "+s((h=t.user_address)==null?void 0:h.city),1),e("td",X,[e("ul",null,[(n(!0),c(m,null,f(t.order_items,l=>(n(),c("li",{key:l.id},s(l.product.title)+" - "+s(l.quantity)+" x "+s(l.unit_price),1))),128))])]),e("td",Z,s(t.total_price),1),e("td",ee,s((x=t.payments[0])==null?void 0:x.type),1),e("td",te,[_(E(j),{href:`/admin/orders/${t.id}`,class:"text-blue-600 hover:text-blue-800"},{default:O(()=>[N("View")]),_:2},1032,["href"]),e("button",{onClick:l=>v(t.id),class:"text-green-600 hover:text-green-800"},"Print Invoice",8,se),e("button",{onClick:l=>w(t.id),class:"text-red-600 hover:text-red-800"},"Delete",8,oe)])])}),128)):(n(),c("tr",re,le))])])]),_(M,{pagination:i.orders},null,8,["pagination"])])])]))}};export{ue as default};
