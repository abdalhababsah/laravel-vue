import{j as k,k as a,N as m,l as C,c as n,o as i,a as e,f,w as B,d as S,v as N,F as h,m as g,t as r,g as T,b as O,u as E,q as j}from"./app-DAshJmLG.js";import{i as D}from"./index-DT2QiY_2.js";import{S as d}from"./sweetalert2-z6gKu1nJ.js";import M from"./Pagination-C4k1q6J5.js";import{d as U}from"./debounce-BeWj_TEz.js";const V={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5"},$={class:"mx-auto max-w-screen-xl px-4 lg:px-12"},A={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},I={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},P={class:"w-full md:w-1/2"},F={class:"relative w-full"},q={class:"overflow-x-auto"},z={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},L={class:"px-4 py-3"},Y={class:"px-4 py-3"},G={class:"px-4 py-3"},H={class:"px-4 py-3"},J={class:"px-4 py-3"},K={class:"px-4 py-3"},Q={class:"px-4 py-3"},R={class:"px-4 py-3"},W={class:"px-4 py-3"},X={class:"px-4 py-3 flex items-center justify-end space-x-2"},Z=["onClick"],ee=["onClick"],te={key:1},ne={__name:"OrdersList",props:{orders:Object,filters:Object},setup(c){const b=c;k(()=>{D()}),a(!1),a(!1),a(!1),a(""),a(""),a(""),a("");const p=a(b.filters.search||""),w=U(o=>{m.get(route("admin.orders.index"),{search:o},{preserveState:!0,preserveScroll:!0})},500);C(p,o=>{w(o)});const _=async o=>{try{(await d.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed&&await m.delete(route("admin.orders.delete",o),{onSuccess:t=>{d.fire({toast:!0,title:t.props.flash.success,position:"top-end",icon:"success",showConfirmButton:!1,timer:1500})},onError:t=>{d.fire({title:"Error!",text:"There was an error deleting the order: "+t.message,position:"top-end",icon:"error",showConfirmButton:!1,timer:1500})}})}catch(s){d.fire({toast:!0,title:"Error!",text:"There was an error deleting the order: "+s.message,position:"top-end",icon:"error",showConfirmButton:!1,timer:1500})}},v=o=>{window.open(`/admin/orders/${o}/print-invoice`,"_blank")};return(o,s)=>(i(),n("section",V,[e("div",$,[e("div",A,[e("div",I,[e("div",P,[e("form",{onSubmit:s[1]||(s[1]=B(()=>{},["prevent"]))},[s[3]||(s[3]=e("label",{for:"simple-search",class:"sr-only"},"Search",-1)),e("div",F,[s[2]||(s[2]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),S(e("input",{type:"text",id:"simple-search","onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search by Order ID, User Name, or Email"},null,512),[[N,p.value]])])],32)])]),e("div",q,[e("table",z,[s[6]||(s[6]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3"},"Order ID"),e("th",{scope:"col",class:"px-4 py-3"},"Order Status"),e("th",{scope:"col",class:"px-4 py-3"},"User Name"),e("th",{scope:"col",class:"px-4 py-3"},"User Email"),e("th",{scope:"col",class:"px-4 py-3"},"User Number"),e("th",{scope:"col",class:"px-4 py-3"},"Address"),e("th",{scope:"col",class:"px-4 py-3"},"Products"),e("th",{scope:"col",class:"px-4 py-3"},"Total Price"),e("th",{scope:"col",class:"px-4 py-3"},"Payment Type"),e("th",{scope:"col",class:"px-4 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",null,[c.orders.data&&c.orders.data.length?(i(!0),n(h,{key:0},g(c.orders.data,t=>{var u,x,y;return i(),n("tr",{key:t.id,class:"border-b dark:border-gray-700"},[e("td",L,r(t.id),1),e("td",Y,r(t.status),1),e("td",G,r(t.user.name),1),e("td",H,r(t.user.email),1),e("td",J,r(t.user.number),1),e("td",K,r((u=t.user_address)==null?void 0:u.address1)+", "+r((x=t.user_address)==null?void 0:x.city),1),e("td",Q,[e("ul",null,[(i(!0),n(h,null,g(t.order_items,l=>(i(),n("li",{key:l.id},r(l.product.title)+" - "+r(l.quantity)+" x "+r(l.unit_price),1))),128))])]),e("td",R,r(t.total_price),1),e("td",W,r((y=t.payments[0])==null?void 0:y.type),1),e("td",X,[f(E(j),{href:`/admin/orders/${t.id}`,class:"text-blue-600 hover:text-blue-800"},{default:T(()=>s[4]||(s[4]=[O("View")])),_:2,__:[4]},1032,["href"]),e("button",{onClick:l=>v(t.id),class:"text-green-600 hover:text-green-800"},"Print Invoice",8,Z),e("button",{onClick:l=>_(t.id),class:"text-red-600 hover:text-red-800"},"Delete",8,ee)])])}),128)):(i(),n("tr",te,s[5]||(s[5]=[e("td",{colspan:"10",class:"text-center py-4"},"No Orders available",-1)])))])])]),f(M,{pagination:c.orders},null,8,["pagination"])])])]))}};export{ne as default};
