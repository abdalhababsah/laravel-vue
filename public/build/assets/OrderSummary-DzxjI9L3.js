import{Q as v,E as u,k as h,c as s,o,a as e,p as x,t as a,C as w,F as _,m as k,f as O,g as j,b as S,u as D,q as E,N as V}from"./app-DAshJmLG.js";import{S as d}from"./sweetalert2-z6gKu1nJ.js";const C={class:"space-y-4 border border-gray-200 lg:w-[352px] w-full bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6 lg:w-full lg:max-w-xs xl:max-w-md"},N={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},q={class:"block sm:inline"},B={class:"space-y-4"},F={class:"space-y-2"},P={class:"flex items-center justify-between gap-4"},J={class:"text-base font-medium text-gray-900"},M={class:"flex items-center justify-between gap-4 border-t border-gray-200 pt-2"},T={class:"text-base font-bold text-gray-900"},H={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},L={class:"list-disc list-inside"},Q=["disabled"],R={class:"flex items-center justify-center gap-2"},A={__name:"OrderSummary",props:{deliveryDetails:{type:Object,required:!0},paymentMethod:{type:String,required:!0},isFormValid:{type:Boolean,required:!0}},setup(m){const n=m,c=v(),l=u(()=>{var r,t;return((t=(r=c.props.cart)==null?void 0:r.data)==null?void 0:t.total)||0}),i=h(!1),f=u(()=>c.props.errors||{}),p=u(()=>{var r;return(r=c.props.flash)==null?void 0:r.error}),y=async()=>{if(!n.isFormValid){d.fire({title:"Error",text:"Please fill in all required fields correctly",icon:"error"});return}if(!l.value){d.fire({title:"Error",text:"Your cart is empty",icon:"error"});return}i.value=!0;try{await V.post(route("checkout.process"),{delivery_details:n.deliveryDetails,payment_method:n.paymentMethod,total_amount:l.value},{preserveScroll:!0,onError:r=>{d.fire({title:"Error",text:Object.values(r)[0],icon:"error"})}})}catch{d.fire({title:"Error",text:"Something went wrong. Please try again.",icon:"error"})}finally{i.value=!1}};return(r,t)=>(o(),s("div",C,[t[5]||(t[5]=e("p",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Order Summary",-1)),p.value?(o(),s("div",N,[e("span",q,a(p.value),1)])):x("",!0),e("div",B,[e("div",F,[e("dl",P,[t[0]||(t[0]=e("dt",{class:"text-base font-normal text-gray-500"},"Original Price",-1)),e("dd",J,"JOD "+a(l.value),1)]),t[1]||(t[1]=w('<dl class="flex items-center justify-between gap-4"><dt class="text-base font-normal text-gray-500">Delivery</dt><dd class="line-through text-base font-medium text-gray-900">JOD 2.00</dd></dl><dl class="flex items-center justify-between gap-4"><dt class="text-base font-normal text-gray-500">Tax</dt><dd class="text-base font-medium text-gray-900">JOD 0.00</dd></dl>',2))]),e("dl",M,[t[2]||(t[2]=e("dt",{class:"text-base font-bold text-gray-900"},"Total",-1)),e("dd",T,"JOD "+a(l.value),1)])]),Object.keys(f.value).length>0?(o(),s("div",H,[e("ul",L,[(o(!0),s(_,null,k(f.value,(g,b)=>(o(),s("li",{key:b,class:"text-sm"},a(g),1))),128))])])):x("",!0),e("button",{onClick:y,disabled:!m.isFormValid||i.value,class:"flex w-full items-center justify-center bg-[#7d836d] px-5 py-2.5 text-sm font-medium text-white hover:bg-[#b0956e] focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50"},a(i.value?"Processing...":"Place Order"),9,Q),e("div",R,[t[4]||(t[4]=e("span",{class:"text-sm font-normal text-gray-500"},"or",-1)),O(D(E),{href:r.route("cart.view"),class:"inline-flex items-center gap-2 text-sm font-medium text-blue-700 underline hover:no-underline"},{default:j(()=>t[3]||(t[3]=[S(" Return to Cart "),e("svg",{class:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m14 0-4 4m4-4-4-4"})],-1)])),_:1,__:[3]},8,["href"])])]))}};export{A as default};
