import{j as S,k as u,E as D,c as y,o as b,f as s,a as l,g as r,u as a,G as F,H as w,I as k,p as T,J as M,K as _,b as h,t as g,L as q,d as z,v as I,z as P,F as G,m as H,n as J,N as U}from"./app-DAshJmLG.js";import{i as Q}from"./index-DT2QiY_2.js";import{S as n}from"./sweetalert2-z6gKu1nJ.js";import R from"./Pagination-C4k1q6J5.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 fade-in-right"},X={key:0},Z={class:"mx-auto max-w-screen-xl px-4 lg:px-12"},ee={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},te={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},le={class:"w-full md:w-1/2"},se={class:"relative w-full"},ae={key:0,class:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20"},oe={class:"w-full md:w-auto flex justify-end"},re={class:"overflow-x-auto"},ne={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ue={class:"px-4 py-3"},ie={class:"px-4 py-3"},de={class:"px-4 py-3"},ce={class:"px-4 py-3"},pe={class:"px-4 py-3"},me={class:"px-4 py-3 text-right flex items-center justify-end space-x-2"},fe={key:1},ve={__name:"UsersList",props:{users:Object},setup(A){S(()=>{Q()});const E=A,c=u(!1),i=u(!1),p=u(""),V=u(""),m=u(""),f=u(""),v=u(""),d=u(""),x=u(!1),C=()=>{V.value="",m.value="",v.value="",f.value="",d.value="",x.value=!1,i.value=!1},L=()=>{C(),c.value=!1,i.value=!0},j=o=>{V.value=o.id,m.value=o.name,v.value=o.email,f.value=o.number,x.value=0,d.value="",c.value=!0,i.value=!0},N=async()=>{const o={name:m.value,email:v.value,number:f.value,password:d.value,isAdmin:x.value};try{await U.post("/admin/users/store",o,{onSuccess:e=>{i.value=!1,n.fire({toast:!0,title:e.props.flash.success||"User created successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500}),C()},onError:e=>{n.fire({title:"Error!",text:Object.values(e).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error creating the user.",icon:"error",confirmButtonText:"OK"})}},O=async()=>{const o={name:m.value,email:v.value,number:f.value,isAdmin:x.value,...d.value&&{password:d.value},_method:"PUT"};try{await U.post(`/admin/users/update/${V.value}`,o,{onSuccess:e=>{n.fire({toast:!0,title:e.props.flash.success||"User updated successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500}),i.value=!1,C()},onError:e=>{n.fire({title:"Error!",text:Object.values(e).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error updating the user.",icon:"error",confirmButtonText:"OK"})}},$=async o=>{try{(await n.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed&&await U.delete(`/admin/users/delete/${o}`,{onSuccess:t=>{n.fire({toast:!0,title:t.props.flash.success||"User deleted successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500})},onError:t=>{n.fire({title:"Error!",text:Object.values(t).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error deleting the user.",icon:"error",confirmButtonText:"OK"})}},B=D(()=>p.value?(E.users.data||[]).filter(o=>o.name.toLowerCase().includes(p.value.toLowerCase())||o.email.toLowerCase().includes(p.value.toLowerCase())):E.users.data||[]);return(o,e)=>(b(),y("section",W,[s(a(q),{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value=t),title:c.value?"Edit User":"Add User",width:"500px","before-close":C},{default:r(()=>[s(a(F),{model:{name:m.value,email:v.value,password:d.value,number:f.value,isAdmin:x.value},"label-width":"100px","label-position":"left"},{default:r(()=>[s(a(w),{label:"Name",required:""},{default:r(()=>[s(a(k),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),placeholder:"Enter user name"},null,8,["modelValue"])]),_:1}),s(a(w),{label:"Email",required:""},{default:r(()=>[s(a(k),{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),placeholder:"Enter user email"},null,8,["modelValue"])]),_:1}),s(a(w),{label:"Number",required:""},{default:r(()=>[s(a(k),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),placeholder:"Enter user number"},null,8,["modelValue"])]),_:1}),s(a(w),{label:"Password",required:!c.value},{default:r(()=>[s(a(k),{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),type:"password",placeholder:"Enter password",autocomplete:"new-password"},null,8,["modelValue"]),c.value?(b(),y("small",X,"Leave blank to keep existing password")):T("",!0)]),_:1},8,["required"]),s(a(w),{label:"Admin",class:"ml-3"},{default:r(()=>[s(a(M),{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=t=>x.value=t)},null,8,["modelValue"])]),_:1}),s(a(w),null,{default:r(()=>[s(a(_),{type:"primary",onClick:e[5]||(e[5]=t=>c.value?O():N())},{default:r(()=>[h(g(c.value?"Update":"Create"),1)]),_:1}),s(a(_),{onClick:e[6]||(e[6]=t=>i.value=!1)},{default:r(()=>e[10]||(e[10]=[h("Cancel")])),_:1,__:[10]})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l("div",Z,[l("div",ee,[l("div",te,[l("div",le,[l("div",se,[z(l("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>p.value=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Search by name or email"},null,512),[[I,p.value]]),l("span",{class:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:e[9]||(e[9]=t=>p.value="")},[p.value?(b(),y("svg",ae,e[11]||(e[11]=[l("path",{"fill-rule":"evenodd",d:"M10 8.586l3.293-3.293a1 1 0 011.414 1.414L11.414 10l3.293 3.293a1 1 0 01-1.414 1.414L10 11.414l-3.293 3.293a1 1 0 01-1.414-1.414L8.586 10 5.293 6.707a1 1 0 011.414-1.414L10 8.586z","clip-rule":"evenodd"},null,-1)]))):T("",!0)])])]),l("div",oe,[s(a(_),{type:"primary",onClick:L},{default:r(()=>[s(a(P),{class:"h-3.5 w-3.5 font-bold mr-2"}),e[12]||(e[12]=h(" Add User "))]),_:1,__:[12]})])]),l("div",re,[l("table",ne,[e[16]||(e[16]=l("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[l("tr",null,[l("th",{scope:"col",class:"px-4 py-3"},"ID"),l("th",{scope:"col",class:"px-4 py-3"},"Name"),l("th",{scope:"col",class:"px-4 py-3"},"Number"),l("th",{scope:"col",class:"px-4 py-3"},"Email"),l("th",{scope:"col",class:"px-4 py-3"},"Role"),l("th",{scope:"col",class:"px-4 py-3 text-right"},"Actions")])],-1)),l("tbody",null,[B.value.length?(b(!0),y(G,{key:0},H(B.value,t=>(b(),y("tr",{key:t.id,class:"border-b dark:border-gray-700"},[l("td",ue,g(t.id),1),l("td",ie,g(t.name),1),l("td",de,g(t.number),1),l("td",ce,g(t.email),1),l("td",pe,[l("span",{class:J(["px-2 py-1 rounded-full text-white",t.isAdmin?"bg-green-500":"bg-blue-500"])},g(t.isAdmin?"Admin":"User"),3)]),l("td",me,[s(a(_),{size:"small",type:"primary",onClick:K=>j(t)},{default:r(()=>e[13]||(e[13]=[h(" Edit ")])),_:2,__:[13]},1032,["onClick"]),s(a(_),{size:"small",type:"danger",onClick:K=>$(t.id)},{default:r(()=>e[14]||(e[14]=[h(" Delete ")])),_:2,__:[14]},1032,["onClick"])])]))),128)):(b(),y("tr",fe,e[15]||(e[15]=[l("td",{colspan:"4",class:"text-center py-4"}," No users found. ",-1)])))])])]),s(R,{pagination:E.users},null,8,["pagination"])])])]))}},_e=Y(ve,[["__scopeId","data-v-5a9c9773"]]);export{_e as default};
