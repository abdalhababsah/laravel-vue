import{Q as C,E as f,k as j,c as o,o as s,a as t,p as k,i as m,t as a,C as O,F as S,m as P,g as x,b as y,u as g,q as p,N as B}from"./app-DAshJmLG.js";import{S as d}from"./sweetalert2-z6gKu1nJ.js";const D={class:"space-y-4 border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6"},E={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},V={class:"block sm:inline"},N={class:"space-y-4"},F={class:"space-y-2"},J={class:"flex items-center justify-between gap-4"},M={class:"text-base font-medium text-gray-900 dark:text-white"},T={class:"flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700"},q={class:"text-base font-bold text-gray-900 dark:text-white"},H={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},L={class:"list-disc list-inside"},Q=["disabled"],R={class:"flex items-center justify-center gap-2"},A={__name:"OrderSummary",props:{isCheckoutPage:{type:Boolean,default:!1},deliveryDetails:{type:Object,default:()=>({})},paymentMethod:{type:String,default:""},isFormValid:{type:Boolean,default:!1}},setup(l){const u=l,c=C(),i=f(()=>{var r,e;return((e=(r=c.props.cart)==null?void 0:r.data)==null?void 0:e.total)||0}),n=j(!1),b=f(()=>c.props.errors||{}),h=f(()=>{var r;return(r=c.props.flash)==null?void 0:r.error}),v=async()=>{if(!u.isFormValid){d.fire({title:"Error",text:"Please fill in all required fields correctly",icon:"error"});return}if(!i.value){d.fire({title:"Error",text:"Your cart is empty",icon:"error"});return}n.value=!0;try{await B.post(route("checkout.process"),{delivery_details:u.deliveryDetails,payment_method:u.paymentMethod,total_amount:i.value},{preserveScroll:!0,onError:r=>{d.fire({title:"Error",text:Object.values(r)[0],icon:"error"})}})}catch{d.fire({title:"Error",text:"Something went wrong. Please try again.",icon:"error"})}finally{n.value=!1}};return(r,e)=>(s(),o("div",D,[e[7]||(e[7]=t("p",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Order Summary",-1)),h.value?(s(),o("div",E,[t("span",V,a(h.value),1)])):k("",!0),t("div",N,[t("div",F,[t("dl",J,[e[0]||(e[0]=t("dt",{class:"text-base font-normal text-gray-500 dark:text-gray-400"},"Original Price",-1)),t("dd",M,"JOD "+a(i.value),1)]),e[1]||(e[1]=O('<dl class="flex items-center justify-between gap-4"><dt class="text-base font-normal text-gray-500 dark:text-gray-400">Delivery</dt><dd class="line-through text-base font-medium text-gray-900 dark:text-white">JOD 2.00</dd></dl><dl class="flex items-center justify-between gap-4"><dt class="text-base font-normal text-gray-500 dark:text-gray-400">Tax</dt><dd class="text-base font-medium text-gray-900 dark:text-white">JOD 0.00</dd></dl>',2))]),t("dl",T,[e[2]||(e[2]=t("dt",{class:"text-base font-bold text-gray-900 dark:text-white"},"Total",-1)),t("dd",q,"JOD "+a(i.value),1)])]),Object.keys(b.value).length>0?(s(),o("div",H,[t("ul",L,[(s(!0),o(S,null,P(b.value,(w,_)=>(s(),o("li",{key:_,class:"text-sm"},a(w),1))),128))])])):k("",!0),l.isCheckoutPage?(s(),o("button",{key:2,onClick:v,disabled:!l.isFormValid||n.value,class:"flex w-full items-center justify-center bg-[#7d836d] px-5 py-2.5 text-sm font-medium text-white hover:bg-[#b0956e] focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50"},a(n.value?"Processing...":"Place Order"),9,Q)):(s(),m(g(p),{key:3,href:r.route("checkout"),class:"flex w-full items-center justify-center bg-[#7d836d] px-5 py-2.5 text-sm font-medium text-white hover:bg-[#b0956e] focus:outline-none focus:ring-4 focus:ring-blue-300"},{default:x(()=>e[3]||(e[3]=[y(" Proceed to Checkout ")])),_:1,__:[3]},8,["href"])),t("div",R,[e[6]||(e[6]=t("span",{class:"text-sm font-normal text-gray-500 dark:text-gray-400"},"or",-1)),l.isCheckoutPage?(s(),m(g(p),{key:0,href:r.route("cart.view"),class:"inline-flex items-center gap-2 text-sm font-medium text-blue-700 underline hover:no-underline"},{default:x(()=>e[4]||(e[4]=[y(" Return to Cart "),t("svg",{class:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m14 0-4 4m4-4-4-4"})],-1)])),_:1,__:[4]},8,["href"])):(s(),m(g(p),{key:1,href:r.route("products.index"),class:"inline-flex items-center gap-2 text-sm font-medium text-blue-700 underline hover:no-underline"},{default:x(()=>e[5]||(e[5]=[y(" Continue Shopping "),t("svg",{class:"h-5 w-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m14 0-4 4m4-4-4-4"})],-1)])),_:1,__:[5]},8,["href"]))])]))}};export{A as default};
