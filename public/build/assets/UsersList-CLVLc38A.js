import{j as F,k as i,y as K,c as y,f as l,g as r,u as a,a as s,d as M,v as q,x as L,F as D,l as z,o as h,H as P,I as _,J as E,K as H,L as g,b as C,t as b,M as J,B as Q,n as R,q as Y,s as G,m as B}from"./app-DkOqE_0T.js";import{i as W}from"./index-BUuzz6jF.js";import{S as n}from"./sweetalert2-z6gKu1nJ.js";import X from"./Pagination-Dxwb93Tq.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T=w=>(Y("data-v-5a9c9773"),w=w(),G(),w),ee={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 fade-in-right"},te={key:0},se={class:"mx-auto max-w-screen-xl px-4 lg:px-12"},le={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},ae={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},oe={class:"w-full md:w-1/2"},re={class:"relative w-full"},ne={key:0,class:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20"},ie=T(()=>s("path",{"fill-rule":"evenodd",d:"M10 8.586l3.293-3.293a1 1 0 011.414 1.414L11.414 10l3.293 3.293a1 1 0 01-1.414 1.414L10 11.414l-3.293 3.293a1 1 0 01-1.414-1.414L8.586 10 5.293 6.707a1 1 0 011.414-1.414L10 8.586z","clip-rule":"evenodd"},null,-1)),ue=[ie],de={class:"w-full md:w-auto flex justify-end"},ce={class:"overflow-x-auto"},pe={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},me=T(()=>s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[s("tr",null,[s("th",{scope:"col",class:"px-4 py-3"},"ID"),s("th",{scope:"col",class:"px-4 py-3"},"Name"),s("th",{scope:"col",class:"px-4 py-3"},"Number"),s("th",{scope:"col",class:"px-4 py-3"},"Email"),s("th",{scope:"col",class:"px-4 py-3"},"Role"),s("th",{scope:"col",class:"px-4 py-3 text-right"},"Actions")])],-1)),fe={class:"px-4 py-3"},ve={class:"px-4 py-3"},xe={class:"px-4 py-3"},ye={class:"px-4 py-3"},he={class:"px-4 py-3"},_e={class:"px-4 py-3 text-right flex items-center justify-end space-x-2"},be={key:1},we=T(()=>s("td",{colspan:"4",class:"text-center py-4"}," No users found. ",-1)),ge=[we],Ce={__name:"UsersList",props:{users:Object},setup(w){F(()=>{W()});const V=w,c=i(!1),u=i(!1),p=i(""),U=i(""),m=i(""),f=i(""),v=i(""),d=i(""),x=i(!1),k=()=>{U.value="",m.value="",v.value="",f.value="",d.value="",x.value=!1,u.value=!1},j=()=>{k(),c.value=!1,u.value=!0},O=o=>{U.value=o.id,m.value=o.name,v.value=o.email,f.value=o.number,x.value=0,d.value="",c.value=!0,u.value=!0},S=async()=>{const o={name:m.value,email:v.value,number:f.value,password:d.value,isAdmin:x.value};try{await B.post("/admin/users/store",o,{onSuccess:e=>{u.value=!1,n.fire({toast:!0,title:e.props.flash.success||"User created successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500}),k()},onError:e=>{n.fire({title:"Error!",text:Object.values(e).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error creating the user.",icon:"error",confirmButtonText:"OK"})}},N=async()=>{const o={name:m.value,email:v.value,number:f.value,isAdmin:x.value,...d.value&&{password:d.value},_method:"PUT"};try{await B.post(`/admin/users/update/${U.value}`,o,{onSuccess:e=>{n.fire({toast:!0,title:e.props.flash.success||"User updated successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500}),u.value=!1,k()},onError:e=>{n.fire({title:"Error!",text:Object.values(e).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error updating the user.",icon:"error",confirmButtonText:"OK"})}},I=async o=>{try{(await n.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed&&await B.delete(`/admin/users/delete/${o}`,{onSuccess:t=>{n.fire({toast:!0,title:t.props.flash.success||"User deleted successfully",position:"top-end",icon:"success",showConfirmButton:!1,timer:1500})},onError:t=>{n.fire({title:"Error!",text:Object.values(t).join(", "),icon:"error",confirmButtonText:"OK"})}})}catch{n.fire({title:"Error!",text:"There was an error deleting the user.",icon:"error",confirmButtonText:"OK"})}},A=K(()=>p.value?(V.users.data||[]).filter(o=>o.name.toLowerCase().includes(p.value.toLowerCase())||o.email.toLowerCase().includes(p.value.toLowerCase())):V.users.data||[]);return(o,e)=>(h(),y("section",ee,[l(a(J),{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=t=>u.value=t),title:c.value?"Edit User":"Add User",width:"500px","before-close":k},{default:r(()=>[l(a(P),{model:{name:m.value,email:v.value,password:d.value,number:f.value,isAdmin:x.value},"label-width":"100px","label-position":"left"},{default:r(()=>[l(a(_),{label:"Name",required:""},{default:r(()=>[l(a(E),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),placeholder:"Enter user name"},null,8,["modelValue"])]),_:1}),l(a(_),{label:"Email",required:""},{default:r(()=>[l(a(E),{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),placeholder:"Enter user email"},null,8,["modelValue"])]),_:1}),l(a(_),{label:"Number",required:""},{default:r(()=>[l(a(E),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),placeholder:"Enter user number"},null,8,["modelValue"])]),_:1}),l(a(_),{label:"Password",required:!c.value},{default:r(()=>[l(a(E),{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),type:"password",placeholder:"Enter password",autocomplete:"new-password"},null,8,["modelValue"]),c.value?(h(),y("small",te,"Leave blank to keep existing password")):L("",!0)]),_:1},8,["required"]),l(a(_),{label:"Admin",class:"ml-3"},{default:r(()=>[l(a(H),{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=t=>x.value=t)},null,8,["modelValue"])]),_:1}),l(a(_),null,{default:r(()=>[l(a(g),{type:"primary",onClick:e[5]||(e[5]=t=>c.value?N():S())},{default:r(()=>[C(b(c.value?"Update":"Create"),1)]),_:1}),l(a(g),{onClick:e[6]||(e[6]=t=>u.value=!1)},{default:r(()=>[C("Cancel")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),s("div",se,[s("div",le,[s("div",ae,[s("div",oe,[s("div",re,[M(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>p.value=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Search by name or email"},null,512),[[q,p.value]]),s("span",{class:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer",onClick:e[9]||(e[9]=t=>p.value="")},[p.value?(h(),y("svg",ne,ue)):L("",!0)])])]),s("div",de,[l(a(g),{type:"primary",onClick:j},{default:r(()=>[l(a(Q),{class:"h-3.5 w-3.5 font-bold mr-2"}),C(" Add User ")]),_:1})])]),s("div",ce,[s("table",pe,[me,s("tbody",null,[A.value.length?(h(!0),y(D,{key:0},z(A.value,t=>(h(),y("tr",{key:t.id,class:"border-b dark:border-gray-700"},[s("td",fe,b(t.id),1),s("td",ve,b(t.name),1),s("td",xe,b(t.number),1),s("td",ye,b(t.email),1),s("td",he,[s("span",{class:R(["px-2 py-1 rounded-full text-white",t.isAdmin?"bg-green-500":"bg-blue-500"])},b(t.isAdmin?"Admin":"User"),3)]),s("td",_e,[l(a(g),{size:"small",type:"primary",onClick:$=>O(t)},{default:r(()=>[C(" Edit ")]),_:2},1032,["onClick"]),l(a(g),{size:"small",type:"danger",onClick:$=>I(t.id)},{default:r(()=>[C(" Delete ")]),_:2},1032,["onClick"])])]))),128)):(h(),y("tr",be,ge))])])]),l(X,{pagination:V.users},null,8,["pagination"])])])]))}},Te=Z(Ce,[["__scopeId","data-v-5a9c9773"]]);export{Te as default};
